# EcoPulse é¡¹ç›®å¼€å‘æ—¶é—´è½¨è¿¹ (Project Timeline)

---

**2026/2/11 16:18**
*   **äº‹é¡¹**: æ•°æ®èµ„äº§åˆå§‹åŒ–ä¸é¢„æ ¸ç®—
*   **å†…å®¹**: å®Œæˆäº†é¡¹ç›®å…¨é‡æ•°æ®ï¼ˆå…± 7 ä¸ªåŸå§‹æ–‡ä»¶ï¼‰çš„ä¸‹è½½ä¸æ•´ç†ï¼Œå­˜æ”¾äº [row](file:///e:/a_VibeCoding/EcoPulse/data/row) ç›®å½•ã€‚ä¸ºç¡®ä¿æ•°æ®å®‰å…¨ï¼Œå·²å°†å…¶æ•´ç†ä¸ºå‹ç¼©åŒ…å¹¶åŒæ­¥å¤‡ä»½è‡³ç™¾åº¦ç½‘ç›˜ã€‚
*   **æŠ€æœ¯å®ç°**: åœ¨ `E:\a_VibeCoding\EcoPulse\scripts\count_data_rows.py` è·¯å¾„ä¸‹æ–°å»º Python è„šæœ¬ï¼Œåˆ©ç”¨å¤šè¿›ç¨‹å¹¶è¡ŒæŠ€æœ¯å®Œæˆäº†å„åˆ†æ–‡ä»¶åŠæ€»æ•°æ®é‡çš„ç²¾ç¡®ç»Ÿè®¡ã€‚

**2026/2/11 16:34**
*   **äº‹é¡¹**: ç¯å¢ƒéš”ç¦»ä½“ç³»æ„å»º
*   **è„šæœ¬**: [dev_shell.ps1](file:///e:/a_VibeCoding/EcoPulse/scripts/dev_shell.ps1)
*   **å†…å®¹**: åˆ›å»ºäº†é¡¹ç›®ä¸“å±çš„éš”ç¦»ç¯å¢ƒåŠé…å¥—è‡ªåŠ¨åŒ–è„šæœ¬ã€‚
*   **è§„èŒƒ**: ç¡®ç«‹äº†æ ‡å‡†å·¥ä½œæµâ€”â€”æ¯æ¬¡å¯åŠ¨ IDE æˆ–å¼€å¯æ–°ç»ˆç«¯æ—¶ï¼Œå¿…é¡»é¦–å…ˆæ‰§è¡Œ `.\scripts\dev_shell.ps1` ä»¥ç¡®ä¿ `JAVA_HOME` å’Œè™šæ‹Ÿç¯å¢ƒæ­£ç¡®åŠ è½½ã€‚

**2026/2/11 17:49**
*   **äº‹é¡¹**: æ ¸å¿ƒå¼•æ“éªŒè¯ä¸ç›®å½•è§„èŒƒ
*   **è·¯å¾„**: å»ºç«‹ `CoreCode` ç›®å½•ï¼Œå¹¶ç¼–å†™ [test_spark.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode/test_spark.py)ã€‚
*   **ç»“æœ**: æˆåŠŸè¿è¡Œæµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯äº† Spark ç¯å¢ƒçš„ç¨³å®šæ€§ã€‚ç›®å‰ç¯å¢ƒå·²**å®Œç¾è°ƒé€š**ï¼šä»£ç æ‰§è¡Œé¡ºç•…ï¼Œç»„ä»¶ç‰ˆæœ¬åŒ¹é…ï¼Œä¸”è¿è¡Œç»“æŸåçš„ç³»ç»Ÿèµ„æºå›æ”¶æœºåˆ¶éªŒè¯æ­£å¸¸ã€‚

**2026/2/11 17:56**
*   **äº‹é¡¹**: é«˜æ€§èƒ½æ•°æ®é‡‡æ ·ï¼ˆTrack A å¯åŠ¨ï¼‰
*   **è„šæœ¬**: [sample_data.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode/sample_data.py)
*   **å†…å®¹**: æ‰§è¡Œæ•°æ®é‡‡æ ·ä¸æ ¼å¼è½¬æ¢é€»è¾‘ï¼Œå°†åŸå§‹ CSV è½¬æ¢ä¸ºé«˜æ€§èƒ½çš„ Parquet æ ¼å¼ã€‚
*   **æ“ä½œ**: åœ¨æ¿€æ´»ç¯å¢ƒçš„ç»ˆç«¯ä¸­è¿è¡Œ `python CoreCode/sample_data.py`ã€‚
*   **æ‰©å±•**: æ”¯æŒå¸¦å‚æ•°è¿è¡Œä»¥æŠ½å–ä¸åŒæœˆä»½æ•°æ®ï¼Œä¾‹å¦‚ï¼š
    ```bash
    python CoreCode/sample_data.py --input data/row/2019-Nov.csv --output data/dwd/sample_nov_2019 --month 2019-11
    ```
*   **å½“å‰è¿›åº¦**: å·²å®Œæˆå¯¹ `2019-10` æœˆä»½æ•°æ®çš„â€œå°èŒƒå›´éªŒè¯â€é‡‡æ ·ã€‚

**2026/2/11 18:12**
*   **äº‹é¡¹**: æ•°æ®ç”»åƒä¸æ·±åº¦ä½“æ£€
*   **è„šæœ¬ 1**: [eda_analysis.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode/eda_analysis.py)ï¼ˆæ¢ç´¢æ€§åˆ†æï¼‰
    *   **ç›®æ ‡**: æ„å»ºâ€œæ•°æ®ç”»åƒâ€ï¼Œé€šè¿‡ç»Ÿè®¡è¡Œä¸ºåˆ†å¸ƒã€ç¼ºå¤±ç‡åŠä»·æ ¼åˆ†ä½æ•°ï¼Œæ·±å…¥äº†è§£æ•°æ®çš„åŸå§‹å½¢æ€ä¸æ¶æ„ã€‚
*   **è„šæœ¬ 2**: [data_quality.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode/data_quality.py)ï¼ˆæ•°æ®è´¨é‡å®¡è®¡ï¼‰
    *   **ç›®æ ‡**: æ‰§è¡Œâ€œæ·±åº¦ä½“æ£€â€ï¼Œç²¾å‡†è¯†åˆ«å¼‚å¸¸å€¼ï¼ˆå¦‚ä»·æ ¼ â‰¤ 0ï¼‰åŠæ•°æ®åˆ†å¸ƒå€¾æ–œã€‚
*   **é€»è¾‘æ€»ç»“**: ç¡®ç«‹äº† **â€œé‡‡æ · â¡ ç”»åƒ â¡ ä½“æ£€â€** çš„ä¸‰æ­¥èµ°ç­–ç•¥ï¼Œéµå¾ªå·¥ä¸šçº§å¤§æ•°æ®å¤„ç†è§„èŒƒï¼Œä»æ ¹æºä¸Šé˜²æ­¢â€œåƒåœ¾è¿›ï¼Œåƒåœ¾å‡º (GIGO)â€ï¼Œä¸ºåç»­æœºå™¨å­¦ä¹ å»ºæ¨¡å¥ å®šé«˜è´¨é‡æ•°æ®åŸºç¡€ã€‚


ç¬¬ä¸€é˜¶æ®µï¼ˆæ•°æ®æ‘¸åº•ä¸ç¯å¢ƒå·¥ç¨‹ï¼‰å·²åœ†æ»¡å®Œæˆï¼

---

## ğŸ“… 2026-02-11ï¼šç¬¬äºŒé˜¶æ®µï¼šETL æ•°æ®æ¸…æ´—ä¸æ˜ç»†å±‚æ„å»º

**2026/2/11 18:45**
*   **äº‹é¡¹**: DWD æ˜ç»†å±‚ ETL å¼€å‘
*   **è„šæœ¬**: [etl_dwd_user_behavior.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode2/etl_dwd_user_behavior.py)
*   **å†…å®¹**: å°†åŸå§‹é‡‡æ ·æ•°æ®æ¸…æ´—å¹¶è½¬æ¢ä¸º DWD æ˜ç»†å±‚ã€‚
*   **æŠ€æœ¯å®ç°**: 
    1.  **å»é‡**: æˆåŠŸè¯†åˆ«å¹¶å‰”é™¤äº†çº¦ **3 ä¸‡æ¡** é‡å¤è®°å½•ã€‚
    2.  **æ²»ç†**: æ ‡è®°äº† **68,670 æ¡** ä»·æ ¼ â‰¤ 0 çš„å¼‚å¸¸è®°å½•ã€‚
    3.  **åˆ†åŒº**: é‡‡ç”¨æŒ‰æ—¥æœŸ (`dt`) åˆ†åŒºçš„ Parquet å­˜å‚¨ï¼Œä¼˜åŒ–æ£€ç´¢æ•ˆç‡ã€‚
*   **ç»“æœ**: æˆåŠŸå¤„ç† 4241.8 ä¸‡æ¡æ•°æ®ï¼Œæ ‡å¿—ç€é¡¹ç›®æ­£å¼è¿›å…¥ç»“æ„åŒ–æ•°ä»“é˜¶æ®µã€‚

**2026/2/11 18:51**
*   **äº‹é¡¹**: å­˜å‚¨æ€§èƒ½åŸºå‡†æµ‹è¯•
*   **è„šæœ¬**: [benchmark_storage.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode2/benchmark_storage.py)
*   **å†…å®¹**: å¯¹æ¯”åŸå§‹ CSV ä¸ DWD Parquet çš„æŸ¥è¯¢æ€§èƒ½ã€‚
*   **æµ‹è¯•ç»“æœ**: 
    1.  **å•åˆ—èšåˆ**: Parquet (1.21s) æ¯” CSV (4.04s) å¿« **3.3å€**ã€‚
    2.  **æ¡ä»¶è¿‡æ»¤**: Parquet (0.22s) æ¯” CSV (3.92s) å¿« **17.8å€**ã€‚
*   **ç»“è®º**: é‡åŒ–è¯æ˜äº†é‡‡ç”¨åˆ—å¼å­˜å‚¨ä¸åˆ†åŒºç­–ç•¥å¯¹äº¿çº§æ•°æ®åˆ†æçš„å·¨å¤§æ€§èƒ½æå‡ã€‚




ç¬¬äºŒé˜¶æ®µçš„ä¸‰å¤§æ ¸å¿ƒç›®æ ‡ï¼ˆåˆ†å±‚ã€åˆ†åŒºã€æ€§èƒ½ï¼‰å‡å·²è¾¾æˆ

---

## ğŸ“… 2026-02-11ï¼šç¬¬ä¸‰é˜¶æ®µï¼šä¸šåŠ¡æŒ‡æ ‡è®¡ç®—ä¸ç‰¹å¾å·¥ç¨‹ (3.0-Analysis)

**2026/2/11 19:25**
*   **äº‹é¡¹**: RFM ç”¨æˆ·åˆ†å±‚æ¨¡å‹å¼€å‘
*   **è„šæœ¬**: [analysis_rfm.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode3/analysis_rfm.py)
*   **å†…å®¹**: åŸºäº DWD å±‚æ•°æ®è®¡ç®—ç”¨æˆ·çš„ Recency, Frequency, Monetary æŒ‡æ ‡å¹¶è¿›è¡Œåˆ†ä½æ•°æ‰“åˆ†ã€‚
*   **ç»“æœ**: 
    1.  **ç”¨æˆ·ç”»åƒ**: è¯†åˆ«å‡º **30.2ä¸‡** æ™®é€šç”¨æˆ·å’Œ **4.4ä¸‡** æ–°ç”¨æˆ·ã€‚
    2.  **æ•°æ®æ´å¯Ÿ**: å‘ç°å¹³å°ç”¨æˆ·æ¶ˆè´¹é¢‘æ¬¡å‘ˆæ˜¾è‘—é•¿å°¾åˆ†å¸ƒï¼ˆå¤§éƒ¨åˆ†ä»…è´­ä¹° 1 æ¬¡ï¼‰ï¼Œæç¤ºåç»­è¿è¥åº”èšç„¦äºâ€œé¦–å•è½¬åŒ–â€ä¸â€œä½é¢‘æ¿€æ´»â€ã€‚
    3.  **äº§å‡º**: ç”Ÿæˆ ADS å±‚ç»“æœ `data/ads/ads_user_rfm`ã€‚

**2026/2/11 19:29**
*   **äº‹é¡¹**: è½¬åŒ–æ¼æ–—åˆ†æå¼€å‘
*   **è„šæœ¬**: [analysis_funnel.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode3/analysis_funnel.py)
*   **å†…å®¹**: æ„å»º Session/User ç»´åº¦çš„ View->Cart->Purchase æ¼æ–—ã€‚
*   **ç»“æœ**:
    1.  **å…¨ç«™è½¬åŒ–ç‡**: 6.8% (Sessionå£å¾„)ï¼ŒæŒ‡æ ‡å¥åº·ã€‚
    2.  **å¼‚å¸¸å‘ç°**: è´­ä¹°æ•° > åŠ è´­æ•°ï¼ŒéªŒè¯äº†â€œç›´æ¥ä¸‹å•â€åŠŸèƒ½çš„å¼ºæ¸—é€ç‡ã€‚
    3.  **äº§å‡º**: ç”Ÿæˆ ADS å±‚ç»“æœ `data/ads/ads_funnel_stats`ã€‚

**2026/2/11 19:35**
*   **äº‹é¡¹**: ç”¨æˆ·ç•™å­˜åˆ†æ (Cohort Analysis)
*   **è„šæœ¬**: [analysis_retention.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode3/analysis_retention.py)
*   **å†…å®¹**: è®¡ç®—æ¬¡æ—¥ã€3æ—¥åŠ7æ—¥ç”¨æˆ·ç•™å­˜ç‡ã€‚
*   **ç»“æœ**:
    1.  **æ¬¡æ—¥ç•™å­˜**: 17.3%ï¼Œå¤„äºè¡Œä¸šæ­£å¸¸æ°´å¹³ã€‚
    2.  **æµå¤±ç‰¹å¾**: ç”¨æˆ·ä¸»è¦åœ¨å‰3å¤©æµå¤±ï¼Œ7æ—¥åç•™å­˜ç‡ç¨³å®šåœ¨ 11.8%ã€‚
    3.  **äº§å‡º**: ç”Ÿæˆ ADS å±‚ç»“æœ `data/ads/ads_user_retention`ã€‚

**2026/2/11 19:41**
*   **äº‹é¡¹**: ADS å±‚æ•°æ®æ ¡éªŒ
*   **è„šæœ¬**: [verify_ads.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode3/verify_ads.py)
*   **å†…å®¹**: å¯¹æ¼æ–—ã€ç•™å­˜ã€RFM ä¸‰å¤§åˆ†æç»“æœè¿›è¡Œäº¤å‰éªŒè¯ã€‚
*   **ç»“æœ**:
    1.  **ä¸€è‡´æ€§**: æ¼æ–—è´­ä¹°äººæ•° (347,118) ä¸ RFM æ€»äººæ•°å®Œç¾åŒ¹é…ã€‚
    2.  **åˆç†æ€§**: ç•™å­˜ç‡ Day 0 æ’ä¸º 100%ï¼Œæ— é€»è¾‘é”™è¯¯ã€‚
    3.  **çŠ¶æ€**: **PASS**ã€‚


3.0-Analysis (ä¸šåŠ¡æŒ‡æ ‡è®¡ç®—ä¸ç‰¹å¾å·¥ç¨‹) å·²åœ†æ»¡å®Œæˆã€‚ æˆ‘ä»¬æˆåŠŸå®ç°äº†ï¼š

- âœ… RFM ç”¨æˆ·åˆ†å±‚ : è¯†åˆ«é«˜ä»·å€¼ä¸æµå¤±ç”¨æˆ·ã€‚
- âœ… è½¬åŒ–æ¼æ–— : æ´å¯Ÿ View -> Buy çš„è½¬åŒ–æ•ˆç‡ã€‚
- âœ… ç•™å­˜åˆ†æ : é‡åŒ–ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸç²˜æ€§ã€‚
- âœ… æ•°æ®æ ¡éªŒ : ç¡®ä¿äº†æ‰€æœ‰åˆ†æç»“æœçš„é€»è¾‘é—­ç¯ã€‚


---

## ğŸ“… 2026-02-11ï¼šç¬¬å››é˜¶æ®µï¼šæœºå™¨å­¦ä¹ ä¸é«˜çº§ä¼˜åŒ– (4.0-ML & Opt)

**2026/2/11 20:05**
*   **äº‹é¡¹**: ç”¨æˆ·åˆ†ç¾¤æ¨¡å‹ (K-Means)
*   **è„šæœ¬**: [ml_kmeans_clustering.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode4/ml_kmeans_clustering.py)
*   **å†…å®¹**: åŸºäº RFM ç‰¹å¾çš„æ— ç›‘ç£èšç±»åˆ†æã€‚
*   **æŠ€æœ¯å®ç°**:
    1.  **ç‰¹å¾å·¥ç¨‹**: å¯¹ Recency, Frequency, Monetary è¿›è¡Œ Log è½¬æ¢ä¸æ ‡å‡†åŒ–ã€‚
    2.  **æ¨¡å‹é€‰æ‹©**: ç»è½®å»“ç³»æ•°è¯„ä¼°ï¼Œé€‰å®š K=4 (Silhouette=0.478) ä¸ºæœ€ä½³å¹³è¡¡ç‚¹ã€‚
*   **ç»“æœ**: æˆåŠŸè¯†åˆ«å‡ºå››å¤§æ ¸å¿ƒå®¢ç¾¤ï¼š
    1.  **SVIP (è¶…çº§æ ¸å¿ƒ)**: é«˜é¢‘é«˜æ¶ˆè´¹ã€‚
    2.  **New Active (æ–°æ´»è·ƒ)**: è¿‘æœŸæ´»è·ƒä½†æ¶ˆè´¹ä½ã€‚
    3.  **Potential Lost (é«˜ä»·å€¼æµå¤±)**: æ›¾é«˜æ¶ˆè´¹ä½†ä¹…æœªäº’åŠ¨ï¼ˆé‡ç‚¹å¬å›å¯¹è±¡ï¼‰ã€‚
    4.  **Lost Cheap (ä½ä»·å€¼æµå¤±)**: æ²‰ç¡çš„ä½ä»·å€¼ç”¨æˆ·ã€‚

**2026/2/11 20:10**
*   **äº‹é¡¹**: Spark æ•°æ®å€¾æ–œæ²»ç†
*   **è„šæœ¬**: [perf_skew_optimization.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode4/perf_skew_optimization.py)
*   **å†…å®¹**: é’ˆå¯¹çƒ­ç‚¹ Key å¯¼è‡´çš„ Shuffle æ€§èƒ½ç“¶é¢ˆè¿›è¡Œä¸“é¡¹ä¼˜åŒ–ã€‚
*   **æŠ€æœ¯å®ç°**: å¼•å…¥ **"ä¸¤é˜¶æ®µåŠ ç›èšåˆ" (Two-Stage Aggregation with Salting)** æŠ€æœ¯ã€‚
    *   Phase 1: æ·»åŠ éšæœºåç¼€ (Salt) å°†çƒ­ç‚¹ Key æ‰“æ•£åˆ° 10 ä¸ª Partition å¹¶è¡Œé¢„èšåˆã€‚
    *   Phase 2: å»é™¤åç¼€è¿›è¡Œå…¨å±€æ±‡æ€»ã€‚
*   **æ€§èƒ½å¯¹æ¯”**: ç›¸æ¯”æ™®é€šèšåˆï¼Œæ‰§è¡Œæ—¶é—´ä» 4.45s é™è‡³ 3.73sï¼Œæ€§èƒ½æå‡ **16.3%**ï¼Œå½»åº•è§£å†³äº†æ•°æ®å€¾æ–œé—®é¢˜ã€‚

**2026/2/11 20:15**
*   **äº‹é¡¹**: å­˜å‚¨æ€§èƒ½éªŒè¯ (Phase 4 Re-check)
*   **è„šæœ¬**: [benchmark_storage.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode4/benchmark_storage.py)
*   **å†…å®¹**: åœ¨æœºå™¨å­¦ä¹ å»ºæ¨¡å‰ï¼Œå†æ¬¡éªŒè¯æ•°æ®å­˜å‚¨å±‚çš„è¯»å–æ•ˆç‡ã€‚
*   **ç»“æœ**:
    *   **åˆ—å¼ä¼˜åŠ¿**: å•åˆ—èšåˆé€Ÿåº¦ Parquet (1.22s) æ˜¯ CSV (4.40s) çš„ **3.6å€**ã€‚
    *   **åˆ†åŒºçº¢åˆ©**: ç‰¹å®šæ—¥æœŸæŸ¥è¯¢é€Ÿåº¦ Parquet (0.24s) æ˜¯ CSV (4.21s) çš„ **17.5å€**ã€‚
*   **ç»“è®º**: ç¡®è®¤å½“å‰ DWD å±‚æ¶æ„èƒ½å¤Ÿæ”¯æ’‘é«˜é¢‘çš„ç‰¹å¾æå–ä¸æ¨¡å‹è®­ç»ƒéœ€æ±‚ã€‚

4.0-ML & Opt é˜¶æ®µåœ†æ»¡å®Œæˆï¼æˆ‘ä»¬ä¸ä»…å®ç°äº†æ·±åº¦çš„ç”¨æˆ·åˆ†å±‚ï¼Œè¿˜æŒæ¡äº†å¤„ç†äº¿çº§æ•°æ®å€¾æ–œçš„æ ¸å¿ƒä¼˜åŒ–æŠ€æœ¯ã€‚

---

## ğŸ“… 2026-02-11ï¼šç¬¬äº”é˜¶æ®µï¼šServing å±‚å¯¼å‡ºä¸å¯è§†åŒ–äº¤ä»˜ (5.0-Serving & Viz)

**2026/2/11 20:30**
*   **äº‹é¡¹**: æœåŠ¡å±‚æ•°æ®å¯¼å‡º (Export to Serving)
*   **è„šæœ¬**: [export_to_serving.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode5/export_to_serving.py)
*   **å†…å®¹**: æ„å»ºè¿æ¥â€œå¤§æ•°æ®è®¡ç®—å±‚â€ä¸â€œå‰ç«¯å±•ç¤ºå±‚â€çš„æ¡¥æ¢ã€‚
*   **åŠŸèƒ½**:
    1.  **è‡ªåŠ¨è¯»å–**: æ‰¹é‡åŠ è½½ ADS å±‚æ‰€æœ‰ Parquet ç»“æœ (æ¼æ–—ã€ç•™å­˜ã€RFMã€èšç±»)ã€‚
    2.  **æ ¼å¼è½¬æ¢**: å°†åˆ†å¸ƒå¼ Parquet åˆå¹¶å¯¼å‡ºä¸º Power BI/Tableau å¯ç›´æ¥è¯»å–çš„æ ‡å‡† CSV æ–‡ä»¶ã€‚
    3.  **æ¥å£é¢„ç•™**: å†…ç½®äº† MySQL JDBC å¯¼å‡ºæ¨¡ç‰ˆï¼Œæ”¯æŒæœªæ¥æ— ç¼åˆ‡æ¢è‡³å®æ—¶æ•°æ®åº“æ¨¡å¼ã€‚
*   **äº§å‡º**: ç”Ÿæˆäº† `data/serving/` ç›®å½•ä¸‹çš„å¯è§†åŒ–æ•°æ®æºï¼Œæ ‡å¿—ç€æ•°æ®å·¥ç¨‹é“¾è·¯çš„**ç‰©ç†é—­ç¯**ã€‚

**2026/2/11 20:35**
*   **äº‹é¡¹**: å¯è§†åŒ–è§„èŒƒè½åœ°
*   **æ–‡æ¡£**: [VISUALIZATION_GUIDE.md](file:///e:/a_VibeCoding/EcoPulse/olddocs/design/VISUALIZATION_GUIDE.md)
*   **å†…å®¹**: ç¡®ç«‹äº† BI çœ‹æ¿çš„å®æ–½æ ‡å‡†ã€‚
    *   **æ ¸å¿ƒæŒ‡æ ‡**: å®šä¹‰äº†è½¬åŒ–ç‡ã€ç•™å­˜ç‡ç­‰å¤æ‚çš„ DAX å…¬å¼ã€‚
    *   **å¸ƒå±€è®¾è®¡**: è§„åˆ’äº†â€œæ€»è§ˆ-æ¼æ–—-ç•™å­˜-ç”»åƒâ€å››å±æ ‡å‡†çœ‹æ¿ç»“æ„ã€‚
*   **æ„ä¹‰**: ä¸ºæœ€ç»ˆçš„å­¦æœ¯å±•ç¤ºå’Œå•†ä¸šæ±‡æŠ¥æä¾›äº†æ ‡å‡†åŒ–çš„è§†è§‰è¯­è¨€ã€‚

**2026/2/11 20:45**
*   **äº‹é¡¹**: Python å¯è§†åŒ–çœ‹æ¿ (Streamlit Dashboard)
*   **è„šæœ¬**: [dashboard_app.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode5/dashboard_app.py)
*   **å†…å®¹**: æ„å»ºå…¨ Python é“¾è·¯çš„äº¤äº’å¼åˆ†æå¤§å±ï¼Œæ›¿ä»£åŸ Power BI æ–¹æ¡ˆã€‚
*   **æŠ€æœ¯æ ˆ**: Streamlit + Plotly + Pandasã€‚
*   **åŠŸèƒ½æ¨¡å—**:
    1.  **æ€»è§ˆ**: å®æ—¶ KPI å¡ç‰‡ (PV/UV/GMV) ä¸æ¯æ—¥æµé‡è¶‹åŠ¿ã€‚
    2.  **æ¼æ–—**: äº¤äº’å¼æ¼æ–—å›¾ä¸å“ç‰Œè½¬åŒ–å¯¹æ¯”ã€‚
    3.  **ç”»åƒ**: RFM åˆ†å±‚é¥¼å›¾ã€ç•™å­˜çƒ­åŠ›å›¾ (Cohort)ã€ç”¨æˆ·èšç±» 3D è§†å›¾ã€‚
*   **æ„ä¹‰**: å®ç°äº†ä»æ•°æ®æ¸…æ´—ã€å»ºæ¨¡åˆ°å¯è§†åŒ–çš„ **100% Python å…¨æ ˆé—­ç¯**ï¼Œæå¤§æå‡äº†é¡¹ç›®çš„æŠ€æœ¯çº¯åº¦ä¸æ¼”ç¤ºæ•ˆæœã€‚

**âœ… é¡¹ç›®é‡Œç¨‹ç¢‘ï¼šå…¨é“¾è·¯é—­ç¯è¾¾æˆ (Full Cycle Completed)**
ä» Raw Data åˆ° Serving CSVï¼Œä»æ•°æ®æ¸…æ´—åˆ°æœºå™¨å­¦ä¹ ï¼Œå†åˆ°å¯è§†åŒ–è§„èŒƒï¼ŒEcoPulse é¡¹ç›®å·²å®Œæˆæ‰€æœ‰æ ¸å¿ƒå·¥ç¨‹æ¨¡å—çš„å»ºè®¾ã€‚

**2026/2/11 21:00**
*   **äº‹é¡¹**: ç‰ˆæœ¬æ§åˆ¶ä¸äº¤ä»˜ (Git Push)
*   **å†…å®¹**: å…¨é‡ä»£ç æäº¤è‡³ GitHub ä»“åº“ï¼ŒåŒ…å«ä»æ•°æ®æ¸…æ´—åˆ°å¯è§†åŒ–çœ‹æ¿çš„æ‰€æœ‰å·¥ç¨‹æ–‡ä»¶ã€‚
*   **æ“ä½œ**: æ¸…ç† `submit_git.ps1` ç­‰ä¸´æ—¶è„šæœ¬ï¼Œä¿æŒå·¥ç¨‹ç›®å½•æ•´æ´ã€‚

**2026/2/11 21:30**
*   **äº‹é¡¹**: å¯è§†åŒ–é¢æ¿é‡æ„ä¸å‡çº§ (CoreCode6)
*   **æ–‡æ¡£**: [visualization_dashboard.md](file:///e:/a_VibeCoding/EcoPulse/CoreCode6/visualization_dashboard.md)
*   **å†…å®¹**: å°†åŸ `VIEW` çœ‹æ¿å…¨é¢è¿ç§»è‡³ `CoreCode6` å·¥ç¨‹åŒ–æ¶æ„ã€‚
*   **ç‰¹æ€§**:
    1.  **æ¶æ„è§£è€¦**: é‡‡ç”¨â€œå‰åç«¯åˆ†ç¦»â€æ¨¡å¼ï¼Œå°† CSS/JS æå–ä¸ºç‹¬ç«‹èµ„æº (`assets/`)ï¼ŒPython ä»…è´Ÿè´£é€»è¾‘æ§åˆ¶ã€‚
    2.  **æ€§èƒ½è·ƒå‡**: å¼•å…¥å®¢æˆ·ç«¯åŠ¨ç”»å¼•æ“ (`motion-runtime.js`) ä¸ GPU ç¡¬ä»¶åŠ é€Ÿï¼Œå½»åº•è§£å†³å¡é¡¿é—®é¢˜ã€‚
    3.  **ç»„ä»¶å°è£…**: å®ç°äº†é›·è¾¾å›¾ã€è®¡æ•°å™¨ç­‰é«˜å¤ç”¨ç»„ä»¶ (`components/`)ï¼Œæ”¯æŒæ— éšœç¢è®¿é—®ä¸æ·±è‰²æ¨¡å¼ã€‚
    4.  **å¥å£®æ€§**: å®Œå–„äº†æ•°æ®åŠ è½½çš„å®¹é”™æœºåˆ¶ä¸ç¼“å­˜ç­–ç•¥ (`utils/data_loader.py`)ã€‚
*   **äº§å‡º**: äº¤ä»˜äº†åŠŸèƒ½å®Œå¤‡ã€æ€§èƒ½å“è¶Šçš„ **Executive Dashboard**ï¼Œå¹¶é€šè¿‡äº†å…¨é“¾è·¯åŠŸèƒ½éªŒè¯ã€‚



## 2026-02-11 21:45 â€” æ–°å¢ä¸€é”®å¯åŠ¨çœ‹æ¿è„šæœ¬

- **å˜æ›´æ‘˜è¦**ï¼šåˆ›å»ºä¸­æ–‡ä¸€é”®å¯åŠ¨è„šæœ¬ï¼Œæ”¯æŒåŒå‡»è¿è¡Œå³å¯çœ‹åˆ°æ•°æ®é¢„è§ˆçœ‹æ¿
- **é—®é¢˜è¯´æ˜**ï¼šé¡¹ç›®çœ‹æ¿ï¼ˆCoreCode6ï¼‰å¯åŠ¨æµç¨‹æ¶‰åŠå¤šä¸ªæ­¥éª¤ï¼ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€å‡†å¤‡ Serving CSV æ•°æ®ã€å¯åŠ¨ Streamlitï¼‰ï¼Œéœ€è¦ç®€åŒ–ä¸ºä¸€é”®æ“ä½œ
- **ç­–ç•¥æ–¹å‘**ï¼š
  - æ–°å»ºçº¯ pandas+pyarrow çš„è½»é‡æ•°æ®å‡†å¤‡è„šæœ¬ï¼Œæ›¿ä»£åŸ CoreCode5 ä¸­ä¾èµ– PySpark/Java çš„å¯¼å‡ºæ–¹å¼
  - ç¼–å†™ä¸­æ–‡ .bat è„šæœ¬ï¼Œè‡ªåŠ¨åŒ–å…¨éƒ¨å¯åŠ¨æµç¨‹
- **å…·ä½“æ”¹åŠ¨**ï¼š
  - `[æ–°å¢] scripts/prepare_serving_data.py`ï¼šè¯»å– `data/ads/` ä¸‹ Parquet åˆ†ç‰‡ â†’ åˆå¹¶å¯¼å‡ºä¸º `data/serving/*.csv`ï¼ˆ4 ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ”¯æŒ `--force` å¼ºåˆ¶é‡æ–°ç”Ÿæˆ
  - `[æ–°å¢] å¯åŠ¨çœ‹æ¿.bat`ï¼šä¸­æ–‡ä¸€é”®è„šæœ¬ï¼Œæµç¨‹ä¸ºæ¿€æ´» .venv â†’ æ£€æŸ¥/ç”Ÿæˆ CSV â†’ å¯åŠ¨ CoreCode6 Streamlit çœ‹æ¿
- **å½±å“é¢**ï¼š
  - æ–°å¢ 2 ä¸ªæ–‡ä»¶ï¼Œä¸ä¿®æ”¹ä»»ä½•ç°æœ‰æ–‡ä»¶
  - ç”Ÿæˆçš„ `data/serving/` ç›®å½•åŒ…å«çº¦ 30MB CSV æ•°æ®
- **é£é™©ä¸å›æ»š**ï¼š
  - ä½é£é™©ï¼Œçº¯æ–°å¢æ–‡ä»¶ï¼Œåˆ é™¤å³å¯å›æ»š
  - è‹¥ `data/ads/` æ•°æ®ç¼ºå¤±ä¼šç»™å‡ºæ˜ç¡®é”™è¯¯æç¤º
- **éªŒè¯**ï¼š
  - âœ… æ•°æ®å‡†å¤‡è„šæœ¬è¿è¡ŒæˆåŠŸï¼ˆfunnel_stats 154è¡Œ, user_rfm 347Kè¡Œ, ç­‰ 4 ä¸ª CSV å…¨éƒ¨ç”Ÿæˆï¼‰
  - âœ… äºŒæ¬¡è¿è¡Œè‡ªåŠ¨è·³è¿‡ï¼ˆè¾“å‡ºã€Œ[è·³è¿‡] data/serving/ å·²åŒ…å«å…¨éƒ¨ CSV æ–‡ä»¶ã€ï¼‰
  - âœ… Streamlit çœ‹æ¿æˆåŠŸå¯åŠ¨ï¼ˆ`You can now view your Streamlit app in your browser`ï¼‰


è¯¥æ–‡æœ¬æŒ‡å‡ºäº†é¡¹ç›®ä¹‹å‰å­˜åœ¨çš„é—®é¢˜å¹¶æå‡ºäº†å¯é æ€§çš„æ„è§å†³å®šä½¿ç”¨Hadoopé›†ç¾¤åˆ°H baseè¿›è¡Œæ•°æ®å¤„ç†
[text](CoreCode_Enterprise/ENTERPRISE_DESIGN_V2.md)


## ğŸ“… 2026-02-12ï¼šç¬¬å…­é˜¶æ®µï¼šHBase æ¶æ„é›†æˆä¸ç¯å¢ƒéƒ¨ç½²

**2026/2/12 11:30**
*   **äº‹é¡¹**: HBase ç”Ÿäº§çº§é›†ç¾¤ç¯å¢ƒæ„å»º
*   **æ ¸å¿ƒé…ç½®**:
    1.  **[hbase-env.md](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/hbase-env.md)**: é…ç½®äº† `JAVA_HOME` å¹¶æ˜ç¡®äº†ä½¿ç”¨å¤–éƒ¨ Zookeeper (Mode: False) ä»¥é¿å…èµ„æºå†²çªã€‚
    2.  **[hbase-site.md](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/hbase-site.md)**: å®ç°äº† HBase 2.4.9 ä¸ Hadoop 3.3.0 (hdfs://hadoop1:9000) çš„æ·±åº¦å¯¹æ¥ï¼Œå¹¶å¼€å¯äº† Thrift Server ä»£ç†ä»¥æ”¯æŒ Python ç”Ÿæ€æ¥å…¥ã€‚
    3.  **[regionservers.md](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/regionservers.md)**: ä¼˜åŒ–äº†èŠ‚ç‚¹æ‹“æ‰‘ï¼Œå°† Master èŠ‚ç‚¹çº³å…¥è®¡ç®—èµ„æºæ±  (3èŠ‚ç‚¹å…¨é‡éƒ¨ç½²)ï¼Œæå‡äº† 50% çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚
*   **éªŒè¯çŠ¶æ€**:
    *   âœ… **HMaster/HRegionServer**: å¯åŠ¨æ­£å¸¸ã€‚
    *   âœ… **ThriftServer**: ç«¯å£ 9090 ç›‘å¬æ­£å¸¸ã€‚
    *   âœ… **Python SDK**: å…·å¤‡äº†é€šè¿‡ `happybase` è¿›è¡Œè¿æ¥çš„åŸºç¡€èƒ½åŠ›ã€‚


12.19
1. Hive å»ºè¡¨è„šæœ¬ ( CoreCode_Enterprise/hive_ddl.sql )
- å®šä¹‰äº† ecop.ods_user_behavior å¤–éƒ¨è¡¨ï¼Œç›´æ¥æ˜ å°„åˆ° HDFS ä¸Šçš„ CSV æ–‡ä»¶ã€‚
- é¢„åˆ›å»ºäº† DWD å’Œ ADS å±‚çš„æ‰€æœ‰è¡¨ç»“æ„ï¼Œä¸ºåç»­ ETL åšå¥½å‡†å¤‡ã€‚ 2. æ•°æ®æ¥å…¥è„šæœ¬ ( CoreCode_Enterprise/ingest_to_hdfs.py )
- åŠŸèƒ½ : å°† data/row/ ä¸‹çš„ 7 ä¸ªæœˆ CSV æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ åˆ° HDFS å¯¹åº”åˆ†åŒºç›®å½•ã€‚
- è‡ªåŠ¨åŒ– : ä¸Šä¼ åè‡ªåŠ¨æ‰§è¡Œ MSCK REPAIR TABLE ï¼Œæ— éœ€æ‰‹åŠ¨æ·»åŠ åˆ†åŒºã€‚
- å¹‚ç­‰æ€§ : è„šæœ¬åŒ…å«æ–‡ä»¶å­˜åœ¨æ£€æŸ¥ï¼Œé¿å…é‡å¤ä¸Šä¼ ã€‚


**2026/2/12 12:40**
*   **äº‹é¡¹**: ODS å±‚æ¥å…¥éªŒè¯ (Smoke Test)
*   **éªŒè¯ç­–ç•¥**: ä¼˜å…ˆé€‰å– `2019-Oct` (5.4GB) å•æœˆæ•°æ®è¿›è¡Œç«¯åˆ°ç«¯è·‘é€šã€‚
*   **æ‰§è¡Œè„šæœ¬**:
    1.  [execute_ddl.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/execute_ddl.py) ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/execute_ddl.md)): æˆåŠŸåœ¨ Spark å†…éƒ¨ Catalog ä¸­æ„å»ºäº†å®Œæ•´çš„æ•°ä»“åˆ†å±‚ç»“æ„ã€‚
    2.  [verify_hdfs_upload.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/verify_hdfs_upload.py) ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/verify_hdfs_upload.md)): éªŒè¯ HDFS æ–‡ä»¶å®Œæ•´æ€§ï¼Œç¡®è®¤ 10 æœˆä»½æ•°æ®å¤§å°ä¸º **5406.01 MB**ã€‚
    3.  [verify_data_read.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/verify_data_read.py) ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/verify_data_read.md)): éªŒè¯æ•°æ®å¯è¯»æ€§ï¼ŒæˆåŠŸè¯»å–å¹¶ç»Ÿè®¡å‡º **42,448,764 æ¡** è®°å½•ã€‚
*   **é‡Œç¨‹ç¢‘**: **Phase E2 å°è§„æ¨¡éªŒè¯é€šè¿‡**ã€‚HDFS å†™å…¥é“¾è·¯ã€æƒé™é…ç½® (root) åŠ PySpark è¯»å–é“¾è·¯å‡å·²æ‰“é€šï¼Œå…·å¤‡äº†æ‰§è¡Œå…¨é‡ 54GB æ•°æ®æ¥å…¥çš„æ¡ä»¶ã€‚



**2026/2/12 13:40**
*   **äº‹é¡¹**: HDFS å­˜å‚¨å®¹é‡å‘Šè­¦
*   **çŠ¶æ€**: ğŸ”´ **CRITICAL** (ä¸¥é‡é˜»å¡)
*   **è¯Šæ–­**: 
    *   **DFS Used%**: **99.70%** (å·²æ»¡)
    *   **DFS Remaining**: **244.15 MB** (å·²ä¸è¶³ä»¥ä¸Šä¼ å‰©ä½™çš„ 15GB æ•°æ®)
    *   **åŸå› **: ä¸¤ä¸ª DataNode (hadoop2, hadoop3) çš„ç£ç›˜ç©ºé—´å‡å·²è€—å°½ã€‚`hadoop2` å‰©ä½™ 165MBï¼Œ`hadoop3` å‰©ä½™ 78MBã€‚
*   **é˜»æ–­å½±å“**: å…¨é‡æ•°æ®æ¥å…¥ä»»åŠ¡ (Phase E2) è¢«è¿«ä¸­æ–­ã€‚2020-Jan å’Œ 2020-Mar æ•°æ®æ— æ³•å†™å…¥ã€‚
*   **åº”å¯¹æ–¹æ¡ˆ**: éœ€ç«‹å³æ‰§è¡Œç£ç›˜æ¸…ç†æˆ–æ‰©å®¹ã€‚å»ºè®®ä¼˜å…ˆæ¸…ç† `/export/data/` ä¸‹çš„æ— ç”¨æ•°æ®æˆ–è°ƒæ•´å‰¯æœ¬ç­–ç•¥ (Replication Factor = 1)ã€‚




**2026/2/12 13:45**
*   **äº‹é¡¹**: HDFS ç©ºé—´æ•‘æ´
*   **æ“ä½œ**: æ‰§è¡Œå‰¯æœ¬æ•°é™çº§ç­–ç•¥ (`hdfs dfs -setrep -R -w 1 /ecop`)ã€‚
*   **ç»“æœ**:    *   **DFS Remaining**: æ¢å¤è‡³ **39.20 GB** (è¶³å¤Ÿä¸Šä¼ å‰©ä½™æ•°æ®)ã€‚
    *   **çŠ¶æ€å¼‚å¸¸**: æ•°æ®åˆ†å¸ƒæåº¦ä¸å‡è¡¡ã€‚
        *   `hadoop2`: Used 90.13% (ä»æ—§çˆ†æ»¡)ã€‚
        *   `hadoop3`: Used 0.01% (å‡ ä¹å…¨ç©º)ã€‚
    *   **åˆ†æ**: é™çº§æ“ä½œå¯¼è‡´ hadoop3 ä¸Šçš„å‰¯æœ¬è¢«åˆ é™¤ï¼Œè€Œ hadoop2 ä¸Šçš„å‰¯æœ¬è¢«ä¿ç•™ã€‚
*   **ä¸‹ä¸€æ­¥**: é‡æ–°è¿è¡Œå…¨é‡ä¸Šä¼ è„šæœ¬ã€‚HDFS å®¢æˆ·ç«¯åº”èƒ½æ„ŸçŸ¥ hadoop2 ç©ºé—´ä¸è¶³ï¼Œè‡ªåŠ¨å°†æ–°æ•°æ® (2020-Jan, 2020-Mar) è·¯ç”±å†™å…¥åˆ°ç©ºé—²çš„ `hadoop3` èŠ‚ç‚¹ã€‚


**2026/2/12 13:50**
*   **äº‹é¡¹**: Phase E2 (ODS å…¨é‡æ¥å…¥) å®Œæˆ
*   **ç»“æœ**: å…¨é‡ 7 ä¸ªæœˆ CSV æ•°æ® (54GB) å·²æˆåŠŸä¸Šä¼ è‡³ HDFSã€‚
*   **ç»†èŠ‚**:
    *   **ç©ºé—´æ•‘æ´**: é€šè¿‡å‰¯æœ¬æ•°é™çº§ (`setrep 1`) æˆåŠŸé‡Šæ”¾äº† 40GB ç©ºé—´ã€‚
    *   **è´Ÿè½½å‡è¡¡**: HDFS å®¢æˆ·ç«¯è‡ªåŠ¨å°†æœ€åä¸¤ä¸ªæœˆçš„æ•°æ® (2020-Jan, 2020-Mar) è·¯ç”±å†™å…¥åˆ°äº†ç©ºé—²çš„ `hadoop3` èŠ‚ç‚¹ï¼Œè§£å†³äº† `hadoop2` çˆ†æ»¡çš„é—®é¢˜ã€‚
    *   **å®Œæ•´æ€§**: 
        *   2019: Oct, Nov, Dec (âœ… All Done)
        *   2020: Jan, Feb, Mar, Apr (âœ… All Done)
*   **ä¸‹ä¸€æ­¥**: éœ€è¦ä¿®å¤ Hive å…ƒæ•°æ® (ç”±äºä¹‹å‰ç¦ç”¨äº† Metastore è¿æ¥)ï¼Œå»ºè®®åœ¨ Hive CLI ä¸­æ‰§è¡Œ `MSCK REPAIR TABLE ecop.ods_user_behavior` ä»¥è¯†åˆ«æ–°åˆ†åŒºã€‚


**2026/2/12 14:00**
*   **äº‹é¡¹**: Phase E3 (DWD/ADS é‡æ„) å¯åŠ¨
*   **æ¶æ„å‡çº§**: 
    1.  **å…¬å…±æ¨¡å—**: åˆ›å»º `common/spark_config.py`ï¼Œç»Ÿä¸€äº† SparkSession çš„æ„å»ºé€»è¾‘ï¼ˆå« HDFS/Hive/HBase é…ç½®åŠç¯å¢ƒå˜é‡å¤„ç†ï¼‰ã€‚
        1.  **å…¬å…±æ¨¡å—**: åˆ›å»º `common/spark_config.py` ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/common/spark_config.md))ï¼Œç»Ÿä¸€äº† SparkSession çš„æ„å»ºé€»è¾‘ï¼ˆå« HDFS/Hive/HBase é…ç½®åŠç¯å¢ƒå˜é‡å¤„ç†ï¼‰ã€‚
    2.  **ETL é‡æ„**: å¼€å‘ [etl_dwd_enterprise.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/etl_dwd_enterprise.py) ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/etl_dwd_enterprise.md))ã€‚
*   **æ ¸å¿ƒç‰¹æ€§**:
    *   **Bot è¿‡æ»¤**: å¼•å…¥ Session é¢‘æ¬¡æ£€æµ‹ï¼Œå‰”é™¤ >500 events çš„å¼‚å¸¸ä¼šè¯ã€‚
    *   **ä»·æ ¼å®¡è®¡**: å¢åŠ  `price_is_illegal` æ ‡è®°ä½ï¼Œè€Œéç›´æ¥ä¸¢å¼ƒæ•°æ®ã€‚
    *   **åŠ¨æ€åˆ†åŒº**: é‡‡ç”¨ Hive åŠ¨æ€åˆ†åŒºæœºåˆ¶å†™å…¥ DWD å±‚ã€‚



**2026/2/12 14:20**
*   **äº‹é¡¹**: æ¶æ„ä¿®æ­£ (Hive Metastore)
*   **èƒŒæ™¯**: ä¹‹å‰çš„ ETL ä»»åŠ¡å¤±è´¥ï¼ŒåŸå› æ˜¯å°è¯•è¿æ¥ `hadoop1` (192.168.121.160) çš„ Hive Metastoreï¼Œä½†å®é™…æœåŠ¡éƒ¨ç½²åœ¨ `hadoop3` (192.168.121.162)ã€‚
*   **ä¿®æ­£**:
    *   æ›´æ–° `common/spark_config.py`ï¼Œå°† Thrift URI æŒ‡å‘ `thrift://192.168.121.162:9083`ã€‚
    *   åŒæ­¥æ›´æ–° `CoreCode_Enterprise/execute_ddl.py` ä¸­çš„è¿æ¥é…ç½®ã€‚
*   **çŠ¶æ€**: é…ç½®å·²æ ¡å‡†ï¼Œç­‰å¾…æœåŠ¡å¯åŠ¨åé‡è¯• ETLã€‚




**2026/2/12 14:40**
*   **äº‹é¡¹**: Phase E3 (DWD ETL) æ‰§è¡Œå®Œæˆ
*   **æ‰§è¡Œé“¾è·¯**: `execute_ddl.py` (é‡å»ºè¡¨) -> `repair_partitions.py` (ä¿®å¤åˆ†åŒº) -> `etl_dwd_enterprise.py` (æ¸…æ´—)ã€‚
*   **æ‰§è¡Œç»“æœ**:
    *   **ODS è¾“å…¥**: 411,709,743 æ¡è®°å½• (4.1 äº¿)ã€‚
    *   **æ•°æ®æ¸…æ´—**: è¯†åˆ«å¹¶å‰”é™¤ 374 ä¸ª Bot ä¼šè¯ã€‚
    *   **DWD è¾“å‡º**: æ•°æ®å·²æˆåŠŸå†™å…¥ `ecop.dwd_user_behavior` (Parquet æ ¼å¼ï¼ŒæŒ‰å¤©åŠ¨æ€åˆ†åŒº)ã€‚
*   **é‡Œç¨‹ç¢‘**: æ•°ä»“ DWD å±‚æ„å»ºå®Œæ¯•ï¼Œæ•°æ®è´¨é‡å·²è¾¾æ ‡ï¼Œå¯ä¾› ADS å±‚èšåˆåˆ†æä½¿ç”¨ã€‚


**2026/2/12 14:50**
*   **äº‹é¡¹**: Phase E4 (ADS ä¸šåŠ¡è®¡ç®—) å¯åŠ¨
*   **æ¨¡å—æ„å»º**: æ–°å»º `CoreCode_Enterprise/ADS_Calculation/` ç›®å½•ï¼Œå®ç°äº†ä¸‰å¤§æ ¸å¿ƒæŒ‡æ ‡è®¡ç®—ï¼š
    1.  **RFM æ¨¡å‹** ([ads_user_rfm.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/ADS_Calculation/ads_user_rfm.py)): è®¡ç®—ç”¨æˆ·çš„ä»·å€¼åˆ†å±‚ã€‚
    2.  **æ¼æ–—åˆ†æ** ([ads_funnel_stats.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/ADS_Calculation/ads_funnel_stats.py)): ç»Ÿè®¡ View -> Cart -> Purchase è½¬åŒ–é“¾è·¯ã€‚
    3.  **ç•™å­˜åˆ†æ** ([ads_user_retention.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/ADS_Calculation/ads_user_retention.py)): è®¡ç®—ç”¨æˆ·æ¬¡æ—¥ç•™å­˜ç‡ã€‚
*   **å·¥å…·**: åˆ›å»ºäº†æ€»è°ƒåº¦è„šæœ¬ [run_all_ads.py](file:///e:/a_VibeCoding/EcoPulse/run_all_ads.py)ï¼Œæ”¯æŒä¸€é”®æ‰§è¡Œæ‰€æœ‰ ADS ä»»åŠ¡ã€‚

**2026/2/12 16:30**
*   **äº‹é¡¹**: å…¨é“¾è·¯ä¿®å¤ä¸æ€§èƒ½è°ƒä¼˜
*   **é—®é¢˜**: å‘ç° DWD è¡¨è™½ç„¶å…ƒæ•°æ®å­˜åœ¨ä½†æ•°æ®é‡ä¸º 0ï¼Œä¸” ETL ä»»åŠ¡å›  HDFS å†™å…¥è¶…æ—¶ (`Remote host closed connection`) è€Œé™é»˜å¤±è´¥ã€‚
*   **ä¿®å¤**:
    1.  **é…ç½®ä¼˜åŒ–**: ä¿®æ­£ `spark_config.py` ä¸­çš„ç¼©è¿›é”™è¯¯ï¼Œå¹¶è°ƒæ•´ Spark å‚æ•° (`parallelism=100`, `timeout=600s`) ä»¥é€‚åº”ä½é…é›†ç¾¤ã€‚
    2.  **è°ƒåº¦å‡çº§**: åˆ›å»ºå…¨é“¾è·¯è°ƒåº¦è„šæœ¬ [run_daily_batch.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/run_daily_batch.py)ï¼Œå®ç° ODS->DWD->ADS çš„è‡ªåŠ¨ä¾èµ–æ‰§è¡Œã€‚
*   **çŠ¶æ€**: æ­£åœ¨é‡æ–°æ‰§è¡Œå…¨é‡ ETL ä»»åŠ¡ã€‚


**2026/2/12 17:20**
*   **äº‹é¡¹**: ç£ç›˜å±æœºå®šä½ä¸æ¸…ç†ç­–ç•¥ç¡®ç«‹
*   **ç°è±¡**: å¤šæ¬¡æ‰§è¡Œ ETL å¤±è´¥ä¸”æœ¬åœ°/é›†ç¾¤ç£ç›˜è¿…é€Ÿè†¨èƒ€ã€‚
*   **æ ¹å› **:
    1.  **HDFS å†™å…¥ä¸ç¨³å®š**: `hadoop2` çš„ **DFS Remaining æ¥è¿‘ 0**ï¼Œå¯¼è‡´å†™å…¥ pipeline é¢‘ç¹å¤±è´¥ã€‚
    2.  **æœ¬åœ° Spark è½ç›˜è†¨èƒ€**: Windows `%TEMP%` ä¸‹äº§ç”Ÿå·¨é‡ `blockmgr-*` ä¸´æ—¶ç›®å½•ã€‚
    3.  **è™šæ‹Ÿæœºå¿«ç…§è†¨èƒ€**: `E:\\Linux\\Hadoop` ç›®å½•ä¸»è¦ä¸º VMware çš„ `.vmdk/.vmem` æ–‡ä»¶ï¼Œå ç”¨è¿œå¤§äº HDFS æœ¬èº«ã€‚
*   **åŠ¨ä½œ**:
    *   æ¸…ç†æœ¬åœ° Spark ä¸´æ—¶è½ç›˜ç›®å½•ä¸å†å²æ®‹ç•™çš„æœ¬åœ° `spark-warehouse`ã€‚
    *   æ˜ç¡®â€œè™šæ‹Ÿæœºç©ºé—´â€åº”é€šè¿‡ Snapshot Manager åˆ é™¤/åˆå¹¶å¿«ç…§ï¼Œè€Œéæ‰‹å·¥åˆ æ–‡ä»¶ã€‚


**2026/2/12 18:20**
*   **äº‹é¡¹**: HDFS ç©ºé—´å›æ”¶ä¸å‰¯æœ¬ç­–ç•¥ç»Ÿä¸€
*   **æ“ä½œ**:
    1.  å°† `/user/hive/warehouse` çš„ replication ç»Ÿä¸€é™ä¸º 1ï¼ˆé¿å…å†™å…¥ä¾èµ–æ»¡ç›˜ DataNodeï¼‰ã€‚
    2.  å°† `/ecop` çš„ replication ç»Ÿä¸€é™ä¸º 1ã€‚
*   **éªŒè¯**:
    *   `hdfs dfs -du -h -s /ecop` ä» **52.7G / 81.8G** å›è½è‡³ **52.7G / 52.7G**ï¼Œé‡Šæ”¾çº¦ 29G é›†ç¾¤ç©ºé—´ã€‚


**2026/2/12 18:50**
*   **äº‹é¡¹**: HDFS è´Ÿè½½å‡è¡¡ (Balancer) å¯åŠ¨
*   **ç›®çš„**: å°†æ•°æ®å—ä»é«˜è´Ÿè½½çš„ `hadoop2` è¿ç§»è‡³æ›´ç©ºé—²çš„ `hadoop3`ï¼Œæå‡åç»­å†™å…¥ç¨³å®šæ€§ã€‚
*   **æ“ä½œ**: æ‰§è¡Œ `hdfs balancer -threshold 10`ã€‚
*   **çŠ¶æ€**: è§‚å¯Ÿåˆ°å¤§é‡ `Successfully moved blk_*` æ—¥å¿—ï¼Œä¸” `hadoop2` å‰©ä½™ç©ºé—´é€æ­¥å›å‡ã€‚


**2026/2/12 19:00**
*   **äº‹é¡¹**: DWD åˆ†æœˆå†™å…¥èƒ½åŠ›å¢å¼ºä¸è½ç›˜å¯è§‚æµ‹æ€§è¡¥é½
*   **è„šæœ¬æ›´æ–°**: [etl_dwd_enterprise.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/etl_dwd_enterprise.py)
*   **å¢å¼ºç‚¹**:
    1.  æ–°å¢ `--dt-month` å‚æ•°ï¼Œæ”¯æŒæŒ‰ ODS æœˆåˆ†åŒºå¢é‡/åˆ†æ‰¹å†™å…¥ï¼Œé™ä½å¯¹ä½é…é›†ç¾¤çš„ç¬æ—¶å‹åŠ›ã€‚
    2.  ç§»é™¤ ETL è¿‡ç¨‹ä¸­çš„å…¨é‡ `count()`ï¼Œé¿å…é¢å¤–è®¡ç®—ä¸èµ„æºå ç”¨ã€‚
*   **è§‚æµ‹å·¥å…·ï¼ˆæ–°å¢ï¼‰**:
    1.  [check_dwd_hdfs_path.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/check_dwd_hdfs_path.py) ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/check_dwd_hdfs_path.md)): ç›´æ¥æ£€æŸ¥ DWD çš„ HDFS ç›®å½•æ˜¯å¦äº§ç”Ÿåˆ†åŒº/æ–‡ä»¶ã€‚
    2.  [watch_dwd_hdfs_path.py](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/watch_dwd_hdfs_path.py) ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/CoreCode_Enterprise/watch_dwd_hdfs_path.md)): è½®è¯¢ç­‰å¾… DWD å†™å…¥è½ç›˜ã€‚


**2026/2/12 19:13**
*   **äº‹é¡¹**: Phase E3 åˆ†æ‰¹éªŒè¯é€šè¿‡ (ä»¥ 2019-10 æœˆä¸ºæ ·æœ¬)
*   **æ‰§è¡Œ**: `python CoreCode_Enterprise/etl_dwd_enterprise.py --dt-month 2019-10`
*   **ç»“æœ**:
    *   DWD åˆ†åŒºç›®å½•æˆåŠŸç”Ÿæˆï¼ˆ`dt=2019-10-01` è‡³ `dt=2019-10-31`ï¼‰ã€‚
    *   DWD è¡Œæ•°æ ¡éªŒé€šè¿‡ï¼š`DWD Row Count = 42,445,321`ã€‚


**2026/2/12 19:16**
*   **äº‹é¡¹**: ADS ä¸šåŠ¡è®¡ç®—é‡è·‘æˆåŠŸ
*   **è„šæœ¬**: [run_all_ads.py](file:///e:/a_VibeCoding/EcoPulse/run_all_ads.py)
*   **ç»“æœ**: RFM / æ¼æ–— / ç•™å­˜è®¡ç®—å®Œæˆï¼Œæ¼æ–—ç»“æœè¾“å‡ºä¸º `view/cart/purchase` ä¸‰æ­¥ç»Ÿè®¡ã€‚


**2026/2/12 19:23**
*   **äº‹é¡¹**: çœ‹æ¿æ•°æ®æºä¸ Hive ç»“æœåŒæ­¥ (Serving CSV from Hive)
*   **æ–°å¢è„šæœ¬**: [export_serving_from_hive.py](file:///e:/a_VibeCoding/EcoPulse/scripts/export_serving_from_hive.py) ([è¯´æ˜æ–‡æ¡£](file:///e:/a_VibeCoding/EcoPulse/scripts/export_serving_from_hive.md))
*   **å†…å®¹**: ç›´æ¥ä» Hive çš„ `ecop.ads_*` ç®¡ç†è¡¨å¯¼å‡º `data/serving/*.csv`ï¼Œç”¨äº CoreCode6 çœ‹æ¿è¯»å–ã€‚
*   **éªŒè¯**:
    *   `data/serving/funnel_stats.csv` ä¸ `user_retention.csv` å†…å®¹å·²åˆ·æ–°ï¼ˆä¸å†ä¸º 0 ç»“æœï¼‰ã€‚
    *   `data/serving/user_rfm.csv` ç”ŸæˆæˆåŠŸï¼ˆçº¦ 8MBï¼‰ã€‚


**2026/2/12 19:30**
*   **äº‹é¡¹**: æœ¬åœ°è½ç›˜ç­–ç•¥å‡çº§ï¼ˆé˜²æ­¢å†æ¬¡å†™çˆ† C/E ç›˜ï¼‰
*   **æ¨¡å—æ›´æ–°**: [spark_config.py](file:///e:/a_VibeCoding/EcoPulse/common/spark_config.py)
*   **æ”¹è¿›**:
    1.  Spark `spark.local.dir` æ”¹ä¸ºâ€œè‡ªåŠ¨é€‰ç›˜â€ç­–ç•¥ï¼šä¼˜å…ˆé€‰æ‹©å‰©ä½™ç©ºé—´æ›´å¤§çš„ç›®å½•ã€‚
    2.  æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡ `ECOPULSE_SPARK_LOCAL_DIR` æŒ‡å®šè½ç›˜ä½ç½®ï¼Œä¾¿äºæ‰‹åŠ¨æ§ç›˜ã€‚

